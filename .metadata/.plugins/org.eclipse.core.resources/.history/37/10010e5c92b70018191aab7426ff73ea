package com.jacob.service;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.jacob.model.Blog;
import com.jacob.model.Upvote;
import com.jacob.repository.UpvoteRepository;

public class UpvoteServiceImpl implements UpvoteService {

	 @Autowired
	 private UpvoteRepository upvoteRepository;

	@Override
	public void saveUpvote(Upvote upvote) {
		// TODO Auto-generated method stub
		upvoteRepository.save(upvote);
	}

	@Override
	public List<Upvote> getAllUpvotes() {
		// TODO Auto-generated method stub
		List<Upvote> ourListOfUpvotes = new ArrayList<Upvote>();
		ourListOfUpvotes = upvoteRepository.findAll();
		return ourListOfUpvotes;
	}

	@Override
	public Upvote getUpvote(int id) {
		// TODO Auto-generated method stub
		Upvote tempUpvote = upvoteRepository.findById(id);
		
		return tempUpvote; 
		
	}

	@Override
	public void deleteUpvote(int id) {


		upvoteRepository.deleteById(id);
	}
	
	@Override 
	public int countUpvotes(int blogId) {
		int count = 0; 
		
		List<Upvote> allVotes = upvoteRepository.findAll(); 
		
		for(int i = 0; i < allVotes.size(); i++) {
			if(allVotes.get(i).getBlog_id() == blogId) {
				count++;
			}
		}
		return count; 
	}

}
